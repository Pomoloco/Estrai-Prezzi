<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>EstrAI prezzi — OCR stabile (Safari iOS)</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Tesseract.js v2.1.5 (stabile per Safari iOS) -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.5/dist/tesseract.min.js"></script>
</head>
<body>
  <main class="container">
    <h1>EstrAI prezzi — (Descrizione, Prezzo, IVA)</h1>
    <p class="subtitle">Tesseract.js 2.1.5 • Safari iOS compatibile • nessun server</p>

    <div class="row">
      <input id="file" type="file" accept="image/*,.pdf">
      <button id="goBtn">Carica / OCR</button>
      <button id="demoBtn" class="ghost">Usa demo</button>
    </div>

    <div class="row options">
      <label>Modello OCR:
        <select id="model">
          <option value="best" selected>tessdata_best (accurato)</option>
          <option value="fast">tessdata_fast (veloce)</option>
        </select>
      </label>
      <label>PSM:
        <select id="psm">
          <option value="4">4 (colonne)</option>
          <option value="6">6 (righe/colonne)</option>
          <option value="3">3 (paragrafo)</option>
        </select>
      </label>
      <label class="chk">
        <input id="numericPass" type="checkbox">
        Secondo pass numerico (opzionale)
      </label>
    </div>

    <div id="error" class="error" hidden></div>
    <div id="progress" class="progress"><span></span></div>

    <section class="panel">
      <h2>Risultati (Descrizione | Prezzo | IVA)</h2>
      <table id="outTable">
        <thead><tr><th>#</th><th>Descrizione</th><th>Prezzo (€)</th><th>IVA (%)</th></tr></thead>
        <tbody></tbody>
      </table>
      <button id="csvBtn" class="ghost" disabled>Esporta CSV</button>
    </section>

    <details class="panel">
      <summary>Testo OCR grezzo</summary>
      <textarea id="raw" rows="14" spellcheck="false"></textarea>
    </details>

    <details class="panel">
      <summary>Log</summary>
      <pre id="log"></pre>
    </details>

    <footer>Client-side • Tesseract.js v2 • PDF.js opzionale (aggiungibile) • Debug log in pagina</footer>
  </main>

  <script src="parser.js"></script>
  <script src="app.js"></script>
</body>
</html>
